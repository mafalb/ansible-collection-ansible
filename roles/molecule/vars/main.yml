# vim: set ft=yaml ts=2 expandtab:

# This file is part of Ansible Collection mafalb.ansible
# Copyright (c) 2019-2021 Markus Falb <markus.falb@mafalb.at>
#
# Ansible collection mafalb.ansible is free software: you can redistribute it 
# and/or modify it under the terms of the GNU General Public License as
# published by the Free Software Foundation, either version 3 of the
# License, or (at your option) any later version.
#
# Ansible collection mafalb.ansible is distributed in the hope that it will be
# useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with Ansible collection mafalb.ansible.
# If not, see <https://www.gnu.org/licenses/>.

---

molecule_virtualenv_command: '/usr/bin/python3 -m venv'

# ansible-base is explicitly mentioned, otherwise it is upgraded to the latest
# possibly causing a mismatch between ansible and ansible-base
#
molecule_ansible_base_pip_package: ansible-base=={{ molecule_ansible_base_version|default(molecule_ansible_version)|mafalb.ansible.pipver }}
molecule_ansible_pip_package: ansible=={{ molecule_ansible_version|mafalb.ansible.pipver }}
molecule_ansible_pip_packages: "{{ [molecule_ansible_pip_package] }} + {{ [molecule_ansible_base_pip_package] if molecule_ansible_version|mafalb.ansible.semver is version('2.10.0', '>=') else [] }}"

molecule_pip_packages:
- molecule[lint,docker,test]=={{ molecule_version|mafalb.ansible.pipver }}
- ansible-lint>=5
- jmespath
- tox
- pylint
- rstcheck
- Jinja2<2.11

...
